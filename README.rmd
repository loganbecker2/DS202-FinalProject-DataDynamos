---
title: "DS 202 Final Project Data Dynamos"
author: "Members: Logan Becker, Gavin Herum, Jackson Weaver"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## View Data Set
```{r, message = FALSE}
#install.packages("readr")
library(readr)
# Use your file name for read_csv (copy file path)
injury_data <- read_csv("C:/Users/Logmo/Downloads/archive (1).zip")
player_data <- read_csv("C:/Users/Logmo/Downloads/archive.zip")
head(injury_data)
head(player_data)
# These datsets are already cleaned we just need to filter it to the data we want
```

## Filter Injury Data to be all years beyond 2010 (Inclusive) 
```{r, message=FALSE}
# Filter injury data to be all years beyond 2010 (Inclusive)
filtered_injurydata <- injury_data[as.numeric(format(injury_data$Date, "%Y")) >= 2010,]
summary(filtered_injurydata$Date)

# Filter injury data to only have rows where Relinquished is not NA (someone is injured), delete Acquired row (Unnecessary)
library(dplyr)
filtered_injurydata <- filtered_injurydata %>%
  filter(!is.na(Relinquished))
filtered_injurydata <- subset(filtered_injurydata, select = -Acquired)
summary(filtered_injurydata)



#-------------TESTING-------------
# Starting 12,119 rows
# Filter injury data to include only notes that contain "Placed on IR"
filtered_injurydata <- subset(filtered_injurydata, grepl("placed on IL", Notes))
filtered_injurydata
# Ending 12,106 rows


# See what notes include that arent placed on IL
# Do we include DTD injuries??
filtered_injurydata <- subset(filtered_injurydata, !grepl(("placed on IL|IR|IL"), Notes))
filtered_injurydata
#--------------------------------

```
## Filter data further to only have rows of injuries (don't include the rows that show acquired player)

## Change old team names to their new team name
```{r, message=FALSE}
all_teams <- (unique(filtered_injurydata$Team))
all_teams
# We see there is 32 teams here, there should only be 30 nba teams. Bullets and Bobcats are old names, let's change those to be correct
# Hornets <- Bobcats
# Wizards <- Bullets

filtered_injurydata$Team <- 
  ifelse(filtered_injurydata$Team == "Bobcats", "Hornets",
  ifelse(filtered_injurydata$Team == "Bullets", "Wizards",
         filtered_injurydata$Team))
# Check if there is now 30 teams
all_teams <- (unique(filtered_injurydata$Team))
all_teams
# Data is ready now
```

## Let's look at the highest injured teams
```{r, message=FALSE}
team_counts <- table(filtered_injurydata$Team)
sorted_team_counts <- sort(team_counts, decreasing = TRUE)
highest5_injuredTeams <- head(sorted_team_counts, 5)
highest5_injuredTeams
```
The most frequently injured team are Spurs (582), Celtics (530), Raptors (529), Mavericks (497), Heat (474).






